| è¿™ä¸ªä½œä¸šå±äºå“ªä¸ªè¯¾ç¨‹ | [è½¯ä»¶å·¥ç¨‹](https://edu.cnblogs.com/campus/gdgy/CSGrade21-12) |
| :-----------------: |:---------------: |
| è¿™ä¸ªä½œä¸šè¦æ±‚åœ¨å“ªé‡Œ | [å›¢é˜Ÿä½œä¸š4â€”â€”é¡¹ç›®å†²åˆº](https://edu.cnblogs.com/campus/gdgy/CSGrade21-12/homework/13020) |
| è¿™ä¸ªä½œä¸šçš„ç›®æ ‡ | è®°å½•æ˜¨æ—¥å·²å®Œæˆå·¥ä½œï¼Œæ˜ç¡®ä»Šæ—¥å·¥ä½œï¼Œæ€»ç»“é¡¹ç›®è¿›åº¦ |

# æ•æ·å†²åˆºæ—¥å¿—é›†åˆ
[é¡¹ç›®å†²åˆºé›†åˆè´´](https://www.cnblogs.com/notingblogs/p/17840948.html)

# ç«™ç«‹ä¼šè®®
## ä¼šè®®ç…§ç‰‡
å› æ¯ä¸ªäººä¸å•æœ‰è½¯å·¥é¡¹ç›®ï¼Œåœ¨çº¿ä¸‹æ—¶é—´ä¸Šå‡‘é½æ‰€æœ‰äººè¾ƒä¸ºå›°éš¾ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨å¾®ä¿¡ä¼šè®®çš„æ–¹å¼è¿›è¡Œã€‚
![image](https://img2023.cnblogs.com/blog/3270285/202311/3270285-20231119081324179-2117685492.png)

## ä¼šè®®å†…å®¹
| æˆå‘˜ | æ˜¨æ—¥å®Œæˆ | ä»Šæ—¥è®¡åˆ’ | é‡åˆ°çš„å›°éš¾ |
|:----:|:---:|:------------:|:---------:|
| æˆ´å­è±ª | ç¼–å†™åšå®¢ Scrum å†²åˆº 4 åŠ Scrum å†²åˆºé›†åˆè´´ã€ç»„ç»‡ç«™ç«‹ä¼šè®®ã€ç»˜åˆ¶é¡¹ç›®ç‡ƒå°½å›¾ã€‚  | ç¼–å†™åšå®¢ Scrum å†²åˆº 5 åŠ æ›´æ–° Scrum å†²åˆºé›†åˆè´´ã€ç»„ç»‡ç«™ç«‹ä¼šè®®ã€ç»˜åˆ¶é¡¹ç›®ç‡ƒå°½å›¾ã€‚ | æˆå‘˜åœ¨æ—¶é—´ä¸Šå¾ˆéš¾å‡‘é½ï¼Œè®¨è®ºç§¯ææ€§æ¬ ç¼ºã€‚ |
| æœ±ä¿Šè£ | ä¿®å¤æ¡†æ¶ä¸­.jpgæ ¼å¼çš„å‚¨å­˜é—®é¢˜ã€å°†å‹ç¼©å›¾åƒåŠŸèƒ½åŠ å…¥åˆ°æ¡†æ¶ä¸­ã€‚ | å°†æ ¼å¼è½¬æ¢åŠŸèƒ½åŠ å…¥åˆ°æ¡†æ¶ä¸­ ã€‚ | æ¶‰åŠè·¯å¾„é—®é¢˜ï¼Œä¸šåŠ¡å‡½æ•°æ¥å£ä¸æ¡†æ¶æ¥å£å·®å¼‚é—®é¢˜ ã€‚ |
| æé“­ä¼Ÿ | åˆæ­¥å®Œæˆæ‰€æœ‰åˆ†é…ä»»åŠ¡   | å°è¯•æ‰©å±•  | æ²¡æœ‰å……åˆ†äº¤æµã€‚ |
| é™ˆå€šæ˜Ÿ | å®Œæˆäº†å›¾ç‰‡æŒ‡å®šå¤§å°çš„è£å‰ª | å°†è£å‰ªæ‰©å±•åˆ°è‡ªç”±å¤§å°ã€‚ | å®ç°æ—¢å®šçš„åŠŸèƒ½æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚ |
| å«å®‡çª | åˆæ­¥å®Œæˆä»£ç ã€‚ | æ•´ä½“ç»“åˆæµ‹è¯•ã€‚ | GUIç•Œé¢æ˜¾ç¤ºå¼‚å¸¸ã€‚ |
| å¼ éœ‡ | å®Œå–„ç»“æ„ã€‚ | ç»§ç»­å­¦ä¹ ã€‚ | æœªç»è¿‡å®é™…æ£€éªŒã€‚ |
| ç”«å°”è¾¾å¾æ–¯ | æ•´ä½“ä»£ç åˆæ­¥å®Œæˆã€‚ | æµ‹è¯•ã€‚ | å¾ˆå¤šç–‘éš¾æ‚ç—‡è‡ªå·±æ— æ³•å®Œæˆã€‚ |

# é¡¹ç›®ç‡ƒå°½å›¾
![image](https://img2023.cnblogs.com/blog/3270285/202311/3270285-20231122124730707-589440912.png)

# ç­¾å…¥è®°å½•
## ä»£ç /æ–‡æ¡£ç­¾å…¥è®°å½•
![image](https://img2023.cnblogs.com/blog/3270285/202311/3270285-20231122124658014-889279927.png)

## å¯¹åº”çš„ Issue å†…å®¹ä¸é“¾æ¥
| æˆå‘˜ | Issue å†…å®¹ä¸é“¾æ¥ |
|:----:|:---:|
| æˆ´å­è±ª | [å›¢é˜Ÿåšå®¢](https://github.com/HaoDavis/PixelPro/issues/13) |
| æœ±ä¿Šè£ | [æ•´ä½“ç»“åˆ](https://github.com/HaoDavis/PixelPro/issues/14) |
| æé“­ä¼Ÿ | [å„åŠŸèƒ½å®Œå–„](https://github.com/HaoDavis/PixelPro/issues/8) |
| é™ˆå€šæ˜Ÿ | [è‡ªç”±å¤§å°è£å‰ª](https://github.com/HaoDavis/PixelPro/issues/4) |
| å«å®‡çª | [å›¾ç‰‡æ–‡å­—è¯†åˆ«](https://github.com/HaoDavis/PixelPro/issues/11) |
| å¼ éœ‡ | [åŠŸèƒ½æµ‹è¯•](https://github.com/HaoDavis/PixelPro/issues/14) |
| ç”«å°”è¾¾å¾æ–¯ | [è¯ä»¶ç…§æ¢åº•è‰²](https://github.com/HaoDavis/PixelPro/issues/6) |
## Code Review ç¼–ç è§„èŒƒæ–‡æ¡£çŠ¶æ€
æ— å˜åŒ–
# é¡¹ç›®è¿›åº¦
## éƒ¨åˆ†æ¨¡å—ä»£ç 
å‡½æ•°æµ‹è¯•ï¼š
```python
import os
from PIL import Image
from svglib.svglib import svg2rlg
from reportlab.graphics import renderPM
from glob import glob
import logging

logging.basicConfig(filename='compress.log', level=logging.DEBUG)

MIN_QUALITY = 20

def get_size(filename):
    return os.path.getsize(filename)

def conpress_image(file_in, file_out=None, target_size=1500):
    """
    compress image without changing any img_size
    :param file_in: æºæ–‡ä»¶
    :param file_out:  outåœ°å€
    :param target_size: å¤§å° å•ä½KB
    :return:  å‹ç¼©æ–‡ä»¶åœ°å€
    """
    if not os.path.exists(file_in):
        raise FileNotFoundError

    basename, ext = os.path.splitext(os.path.basename(file_in))
    file_out = file_out or f'{basename}_compressed{ext}'

    logging.info(f'Compressing {file_in} to {file_out}')

    try:
        quality = 50
        while True:
            with Image.open(file_in) as img:
                img.save(file_out, quality=quality)

            size = get_size(file_out)
            logging.info(f'Quality: {quality}, Size:{size/1024}KB')

            if size/1024 <= target_size or quality < MIN_QUALITY:
                break

            quality -= 10
    except Exception as e:
        logging.error(e)

    return file_out, get_size(file_out)

def compress_image(input_image_path, output_image_path):
    fileType = input_image_path.split(".")[-1]
    with Image.open(input_image_path) as image:
        image.save(output_image_path, fileType.upper(), optimize=True, quality=1)

def img2Convert(path_in, target_format):
    Dir_img, src_format = os.path.splitext(path_in)
    if src_format.lower() == '.svg':
        drawing = svg2rlg(path_in)
        renderPM.drawToFile(drawing, Dir_img+'.'+target_format, fmt=target_format.upper())
    with Image.open(path_in) as source_img:
        src_mode = source_img.mode
        if src_format.lower() != '.' + target_format.lower():
            source_img = source_img.convert('RGB')
            target_img = Image.new(src_mode, source_img.size)
            target_img.putdata(list(source_img.getdata()))
            file_name = f'{Dir_img}.{target_format}'
            target_img.save(file_name)
            print(f'Convert {path_in} to {target_format} successfully')
        else:
            print(f'Formats are the same, no need to convert {path_in} ğŸ˜…')

def img_folder2Convert(file_folder, tgt_format):
    for img in glob(file_folder + '/*'):
        img_format = os.path.splitext(img)[1][1:].upper()
        if img_format not in ['PNG', 'JPG', 'BMP', 'SVG', 'JFIF', 'WEBP']:
            print(f'The format of {img} is not supported yet')
        else:
            img2Convert(img, tgt_format)

keyToFunc = {
    'compress_image': compress_image,
    'conpress_image': conpress_image,
    'img_folder2Convert': img_folder2Convert
}

if __name__ == '__main__':
    conpress_image('computer_kuan_201632_18.jpg', target_size=1024)
    img_folder2Convert('data', 'PNG')  # ä½œä¸ºç¤ºä¾‹è°ƒç”¨
```
## éƒ¨åˆ†è¿è¡Œç»“æœ
![image](https://img2023.cnblogs.com/blog/3270285/202311/3270285-20231122130341614-1338921857.png)

# æ€»ç»“
| æˆå‘˜ | æ€»ç»“ |
|:----:|:---:|
| æˆ´å­è±ª | å›¢é˜Ÿåä½œè€—æ—¶è¾ƒé•¿ã€å®é™…ç¼–å†™ä»£ç åªæ˜¯ä¸€å°éƒ¨åˆ†ã€‚ |
| æœ±ä¿Šè£ | è¦å……åˆ†äº¤æµ ç»Ÿä¸€æ¥å£æé«˜æ•ˆç‡ã€‚ |
| æé“­ä¼Ÿ | éœ€è¦å……åˆ†äº¤æµã€‚ |
| é™ˆå€šæ˜Ÿ | å¯ä»¥å¾ªåºæ¸è¿›ï¼Œç”±æ˜“åˆ°éš¾ã€‚ |
| å«å®‡çª | åŠ æ²¹å¿«åšå¥½äº†ã€‚ |
| å¼ éœ‡ | å°è¯•ä½¿ç”¨è¿‡ååšå‡ºè°ƒæ•´ã€‚ |
| ç”«å°”è¾¾å¾æ–¯ | è¿˜éœ€ç»§ç»­åŠªåŠ›ã€‚ |