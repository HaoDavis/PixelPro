| è¿™ä¸ªä½œä¸šå±äºå“ªä¸ªè¯¾ç¨‹ | [è½¯ä»¶å·¥ç¨‹](https://edu.cnblogs.com/campus/gdgy/CSGrade21-12) |
| :-----------------: |:---------------: |
| è¿™ä¸ªä½œä¸šè¦æ±‚åœ¨å“ªé‡Œ | [å›¢é˜Ÿä½œä¸š4â€”â€”é¡¹ç›®å†²åˆº](https://edu.cnblogs.com/campus/gdgy/CSGrade21-12/homework/13020) |
| è¿™ä¸ªä½œä¸šçš„ç›®æ ‡ | è®°å½•æ˜¨æ—¥å·²å®Œæˆå·¥ä½œï¼Œæ˜ç¡®ä»Šæ—¥å·¥ä½œï¼Œæ€»ç»“é¡¹ç›®è¿›åº¦ |

# æ•æ·å†²åˆºæ—¥å¿—é›†åˆ
[é¡¹ç›®å†²åˆºé›†åˆè´´](https://www.cnblogs.com/notingblogs/p/17840948.html)

# ç«™ç«‹ä¼šè®®
## ä¼šè®®ç…§ç‰‡
å› æ¯ä¸ªäººä¸å•æœ‰è½¯å·¥é¡¹ç›®ï¼Œåœ¨çº¿ä¸‹æ—¶é—´ä¸Šå‡‘é½æ‰€æœ‰äººè¾ƒä¸ºå›°éš¾ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨å¾®ä¿¡ä¼šè®®çš„æ–¹å¼è¿›è¡Œã€‚
![image](https://img2023.cnblogs.com/blog/3270285/202311/3270285-20231119081324179-2117685492.png)

## ä¼šè®®å†…å®¹
| æˆå‘˜ | æ˜¨æ—¥å®Œæˆ | ä»Šæ—¥è®¡åˆ’ | é‡åˆ°çš„å›°éš¾ |
|:----:|:---:|:------------:|:---------:|
| æˆ´å­è±ª | ç¼–å†™åšå®¢ Scrum å†²åˆº 3 åŠ Scrum å†²åˆºé›†åˆè´´ã€ç»„ç»‡ç«™ç«‹ä¼šè®®ã€ç»˜åˆ¶é¡¹ç›®ç‡ƒå°½å›¾ã€‚  | ç¼–å†™åšå®¢ Scrum å†²åˆº 4 åŠ æ›´æ–° Scrum å†²åˆºé›†åˆè´´ã€ç»„ç»‡ç«™ç«‹ä¼šè®®ã€ç»˜åˆ¶é¡¹ç›®ç‡ƒå°½å›¾ã€‚ | æˆå‘˜åœ¨æ—¶é—´ä¸Šå¾ˆéš¾å‡‘é½ï¼Œè®¨è®ºç§¯ææ€§æ¬ ç¼ºã€‚ |
| æœ±ä¿Šè£ | å°†ä¸€ä¸ªç®€å•çš„ä¸šåŠ¡ä¸šåŠ¡å‡½æ•°æ”¾åˆ°æ¡†æ¶é‡Œæµ‹è¯•ã€‚ | å®Œå–„.jpgæ ¼å¼çš„å¤„ç† ã€‚ | å„ç§æ ¼å¼å›¾ç‰‡å‚¨å­˜æ–¹å¼ä¸åŒã€‚ |
| æé“­ä¼Ÿ | å‹ç¼©å›¾ç‰‡  | åˆ¶å®šå›¾ç‰‡å¤§å°  | å­¦ä¹ æ–°åº“ã€æ”¹bug  |
| é™ˆå€šæ˜Ÿ | å®Œæˆäº†å›¾ç‰‡æŒ‡å®šå¤§å°çš„è£å‰ª | å°†è£å‰ªæ‰©å±•åˆ°è‡ªç”±å¤§å°ã€‚ | ä»£ç æœ‰å°‘é‡bugã€‚ |
| å«å®‡çª | åˆæ­¥å®ŒæˆOCRä»£ç ã€‚ | OCRéƒ¨åˆ†æ•´ä½“ç»“åˆæµ‹è¯•ã€‚ | ä¾èµ–é¡¹çš„ç¯å¢ƒæ­å»ºè¿‡ç¨‹æ¯”è¾ƒåå·ã€‚ |
| å¼ éœ‡ | å®Œæˆæµ‹è¯•è®¡åˆ’ã€‚ | ç»§ç»­å­¦ä¹ ã€‚ | æµ‹è¯•ç”¨ä¾‹çš„ç¼–å†™ã€‚ |
| ç”«å°”è¾¾å¾æ–¯ | æ•´ä½“ä»£ç åˆæ­¥å®Œæˆã€‚ | å®Œå–„ç»“åˆè¿è¡Œã€‚ | ä»£ç è¿è¡Œè¿˜è¦å†å»æŸ¥æ¼è¡¥ç¼ºã€‚ |

# é¡¹ç›®ç‡ƒå°½å›¾
![image](https://img2023.cnblogs.com/blog/3270285/202311/3270285-20231121095827878-1291687554.png)

# ç­¾å…¥è®°å½•
## ä»£ç /æ–‡æ¡£ç­¾å…¥è®°å½•
![image](https://img2023.cnblogs.com/blog/3270285/202311/3270285-20231121095926357-261132955.png)

## å¯¹åº”çš„ Issue å†…å®¹ä¸é“¾æ¥
| æˆå‘˜ | Issue å†…å®¹ä¸é“¾æ¥ |
|:----:|:---:|
| æˆ´å­è±ª | [å›¢é˜Ÿåšå®¢](https://github.com/HaoDavis/PixelPro/issues/13) |
| æœ±ä¿Šè£ | [Djangoä»£ç æ¡†æ¶](https://github.com/HaoDavis/PixelPro/issues/3) |
| æé“­ä¼Ÿ | [å›¾ç‰‡å‹ç¼©](https://github.com/HaoDavis/PixelPro/issues/8) |
| é™ˆå€šæ˜Ÿ | [å›¾ç‰‡è£å‰ª](https://github.com/HaoDavis/PixelPro/issues/4) |
| å«å®‡çª | [å›¾ç‰‡æ–‡å­—è¯†åˆ«](https://github.com/HaoDavis/PixelPro/issues/11) |
| å¼ éœ‡ | [åŠŸèƒ½æµ‹è¯•](https://github.com/HaoDavis/PixelPro/issues/14) |
| ç”«å°”è¾¾å¾æ–¯ | [è¯ä»¶ç…§æ¢åº•è‰²](https://github.com/HaoDavis/PixelPro/issues/6) |
## Code Review ç¼–ç è§„èŒƒæ–‡æ¡£çŠ¶æ€
æ— å˜åŒ–
# é¡¹ç›®è¿›åº¦
## éƒ¨åˆ†æ¨¡å—ä»£ç 
å›¾ç‰‡æ ¼å¼è½¬æ¢ï¼š
```python
import os

from PIL import Image
from svglib.svglib import svg2rlg
from reportlab.graphics import renderPM
from glob import glob

# å›¾ç‰‡æ ¼å¼æ”¯æŒï¼š  png jpg bmp
# TODO :  webp svg
path_in = r'data'
path_out = r'result'
FORMAT = ['PNG', 'JPG', 'BMP', 'SVG', 'JFIF', 'WEBP']


# å•æ¬¡ä¸å¤šæ¬¡
def img2Convert(path_in, target_format):
    """
    param path_in: åŸå›¾ç‰‡è·¯å¾„
    :param target_format:  å›¾ç‰‡è¾“å‡ºæ ¼å¼
    :return boolï¼šæ˜¯å¦æˆåŠŸ
    """
    Dir_img, src_format= path_in.split('.')[0],path_in.split('.')[1]
    if src_format == 'svg':
        drawing = svg2rlg(path_in)
        renderPM.drawToFile(drawing,Dir_img+'.'+target_format,fmt=target_format.upper())
    with Image.open(path_in) as source_img:
        src_mode = source_img.mode
        has_alpha = 'A' in src_mode # bool
        if src_format != target_format:
            source_img = source_img.convert('RGB')  # å°†æºå›¾åƒconvertåˆ°PILæ”¯æŒçš„mode
            target_img = Image.new(src_mode, source_img.size)  # åˆ›å»ºç›®æ ‡å¯¹è±¡
            target_img.putdata(list(source_img.getdata()))  # å°†åƒç´ ä»æºå›¾åƒå¤åˆ¶åˆ°ç›®æ ‡å›¾åƒ
            file_name = f'{Dir_img}.{target_format}'
            target_img.save(file_name)
            print('Convert to {} successfully'.format(target_format))
        else:
            print('formats are the same,no need to convert ğŸ˜…')


def img_folder2Convert(file_folder, tgt_format):  # æ•´ä¸ªæ–‡ä»¶å¤¹è¯»å–å›¾ç‰‡
    for img in glob(file_folder + '\\*'):
        img_format=img.split('.')[1].upper()
        if img_format not in FORMAT:
            print('the format of {} is not support yet'.format(img))
        else:
            img2Convert(img, tgt_format)
```
å›¾ç‰‡å‹ç¼©ï¼š
```python
import os
import logging
import tempfile

from PIL import Image

logging.basicConfig(filename='compress.log',level=logging.DEBUG)

MIN_QUALITY = 20

def get_size(filename):
    return os.path.getsize(filename)

def conpress_image(file_in, file_out=None,target_size=1500):
    """
    compress image without changing any img_size
    :param file_in: æºæ–‡ä»¶
    :param file_out:  outåœ°å€
    :param target_size: å¤§å° å•ä½KB
    :return:  å‹ç¼©æ–‡ä»¶åœ°å€
    """
    if not os.path.exists(file_in):
        raise FileNotFoundError


    basename,ext = os.path.splitext(os.path.basename(file_in))
    file_out = file_out or f'{basename}_compressed{ext}'

    logging.info(f'Compressing {file_in} to {file_out}')

    try:
        quality = 50
        while True:
            with Image.open(file_in) as img:
                img.save(file_out,quality=quality)

            size = get_size(file_out)
            logging.info(f'Quality: {quality}, Size:{size/1024}KB')

            if size/1024 <=target_size or quality < MIN_QUALITY:
                break

            quality -=10
    except Exception as e:
        logging.error(e)

    return file_out,get_size(file_out)

if __name__ == '__main__':
    conpress_image('computer_kuan_201632_18.jpg',target_size=1024)
```
## éƒ¨åˆ†è¿è¡Œç»“æœ
![image](https://img2023.cnblogs.com/blog/3270285/202311/3270285-20231121100119245-1194377909.png)

# æ€»ç»“
| æˆå‘˜ | æ€»ç»“ |
|:----:|:---:|
| æˆ´å­è±ª | å›¢é˜Ÿåä½œè€—æ—¶è¾ƒé•¿ã€å®é™…ç¼–å†™ä»£ç åªæ˜¯ä¸€å°éƒ¨åˆ† |
| æœ±ä¿Šè£ | å¤šæŸ¥é˜…èµ„æ–™äº†è§£åŸç†ä»è€Œæ”¯æŒåº”ç”¨ã€‚ |
| æé“­ä¼Ÿ | æ²‰æ·€ |
| é™ˆå€šæ˜Ÿ | å¯ä»¥å¾ªåºæ¸è¿›ï¼Œç”±æ˜“åˆ°éš¾ã€‚ |
| å«å®‡çª | ç»§ç»­åŠ æ²¹ã€‚ |
| å¼ éœ‡ | ç»§ç»­å­¦ä¹ ã€‚ |
| ç”«å°”è¾¾å¾æ–¯ | ç¦»å®Œæˆç›®æ ‡è¿˜å·®ä¸€ç‚¹ï¼Œç»§ç»­åŠªåŠ›ã€‚ |